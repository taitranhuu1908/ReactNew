{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ADMIN\\\\Desktop\\\\ReactJS\\\\src\\\\Components\\\\AdminPage\\\\Avatar\\\\Avatar.js\";\nimport React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../../Actions\";\nimport \"./styles.scss\";\nimport callApi from \"./../../../utils/apiCaller\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Avatar extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = e => {\n      var name = e.target.name;\n      var value = e.target.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.findIndex = (item, list) => {\n      var result = -1;\n      list.forEach((user, index) => {\n        if (user.email === item) {\n          return result = index;\n        }\n      });\n      return result;\n    };\n\n    this.onPostAvatar = e => {\n      var file = e.target.files[0];\n      var fr = new FileReader();\n      fr.readAsDataURL(file);\n\n      fr.onloadend = () => {\n        this.setState({\n          srcImage: fr.result,\n          avatar: fr.result\n        });\n      };\n    };\n\n    this.handleInfo = () => {\n      var {\n        users\n      } = this.props;\n      var {\n        firstName,\n        lastName,\n        address,\n        dob,\n        phone,\n        avatar\n      } = this.state;\n      var userMail = JSON.parse(localStorage.getItem(\"user\"));\n      var index = this.findIndex(userMail, users);\n      if (index === -1) return;\n      var user = {\n        id: users[index].id,\n        email: users[index].email,\n        password: users[index].password,\n        firstName: firstName,\n        lastName: lastName,\n        avatar: avatar ? avatar : \"\",\n        address: address,\n        dob: dob,\n        phone: phone\n      };\n      this.props.onUpdateUser(user);\n    };\n\n    this.onSave = e => {\n      e.preventDefault();\n      var {\n        users\n      } = this.props;\n      var userMail = JSON.parse(localStorage.getItem(\"user\"));\n      var index = this.findIndex(userMail, users);\n      this.handleInfo();\n      this.setState({\n        check: users[index].id\n      });\n    };\n\n    this.onChooseAvatar = () => {\n      this.fileRef.current.click();\n    };\n\n    this.state = {\n      firstName: \"\",\n      lastName: \"\",\n      address: \"\",\n      dob: \"\",\n      phone: \"\",\n      avatar: null,\n      srcImage: null,\n      check: null\n    };\n    this.fileRef = /*#__PURE__*/React.createRef();\n  }\n\n  componentDidMount() {\n    this.props.onGetUsers();\n    var id = JSON.parse(localStorage.getItem(\"uid\"));\n\n    if (id !== -1) {\n      callApi(`usersAdmin/${id}`, \"GET\", null).then(res => {\n        var user = res.data;\n        this.setState({\n          lastName: user.lastName,\n          firstName: user.firstName,\n          avatar: user.avatar,\n          srcImage: user.avatar,\n          address: user.address,\n          dob: user.dob,\n          phone: user.phone\n        });\n      });\n    }\n  }\n\n  render() {\n    var {\n      firstName,\n      check,\n      lastName,\n      address,\n      dob,\n      phone,\n      srcImage\n    } = this.state;\n\n    if (check) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: `/admin`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 14\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid avatar-page\",\n      id: \"login-form\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-form-content p-0\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row align-items-center w-100\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-6 avatar-left \",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"img mb-3 text-center\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: srcImage ? srcImage : \"https://www.kindpng.com/picc/m/78-785827_user-profile-avatar-login-account-male-user-icon.png\",\n                alt: \"\",\n                className: \"avatar rounded-circle \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"choose-avatar text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                className: \"d-none\",\n                ref: this.fileRef,\n                name: \"file\",\n                multiple: true,\n                onChange: this.onPostAvatar\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn border shadow-none \",\n                onClick: this.onChooseAvatar,\n                children: \"Choose Avatar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-6 text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"display-5 fw-bold mb-4 font-ubun\",\n              children: \"INFOMATION\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              action: \"\",\n              onSubmit: this.onSave,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"input-group mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"firstName\",\n                  \"aria-label\": \"First name\",\n                  placeholder: \"First Name\",\n                  value: firstName,\n                  onChange: this.onChange,\n                  className: \"form-control shadow-none\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"lastName\",\n                  value: lastName,\n                  onChange: this.onChange,\n                  \"aria-label\": \"Last name\",\n                  placeholder: \"Last Name\",\n                  className: \"form-control shadow-none\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"input-group mb-4\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: address,\n                  onChange: this.onChange,\n                  name: \"address\",\n                  className: \"form-control shadow-none\",\n                  placeholder: \"Address\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"input-group mb-4\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"dob\",\n                  value: dob,\n                  onChange: this.onChange,\n                  className: \"form-control shadow-none\",\n                  placeholder: \"Date of Birth\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"input-group mb-4\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"phone\",\n                  value: phone,\n                  onChange: this.onChange,\n                  className: \"form-control shadow-none\",\n                  placeholder: \"Telephone Number\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-success w-50\",\n                children: \"Save\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    users: state.usersAdmin\n  };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n    onGetUsers: () => {\n      dispatch(actions.acGetUserAdminRequest());\n    },\n    onUpdateUser: user => {\n      dispatch(actions.acUpdateUserAdminRequest(user));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Avatar);","map":{"version":3,"sources":["C:/Users/ADMIN/Desktop/ReactJS/src/Components/AdminPage/Avatar/Avatar.js"],"names":["React","Component","Redirect","connect","actions","callApi","Avatar","constructor","props","onChange","e","name","target","value","setState","findIndex","item","list","result","forEach","user","index","email","onPostAvatar","file","files","fr","FileReader","readAsDataURL","onloadend","srcImage","avatar","handleInfo","users","firstName","lastName","address","dob","phone","state","userMail","JSON","parse","localStorage","getItem","id","password","onUpdateUser","onSave","preventDefault","check","onChooseAvatar","fileRef","current","click","createRef","componentDidMount","onGetUsers","then","res","data","render","mapStateToProps","usersAdmin","mapDispatchToProps","dispatch","acGetUserAdminRequest","acUpdateUserAdminRequest"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../../../Actions\";\r\nimport \"./styles.scss\";\r\nimport callApi from \"./../../../utils/apiCaller\";\r\n\r\nclass Avatar extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      firstName: \"\",\r\n      lastName: \"\",\r\n      address: \"\",\r\n      dob: \"\",\r\n      phone: \"\",\r\n      avatar: null,\r\n      srcImage: null,\r\n      check: null,\r\n    };\r\n    this.fileRef = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.onGetUsers();\r\n    var id = JSON.parse(localStorage.getItem(\"uid\"));\r\n    if (id !== -1) {\r\n      callApi(`usersAdmin/${id}`, \"GET\", null).then((res) => {\r\n        var user = res.data;\r\n        this.setState({\r\n          lastName: user.lastName,\r\n          firstName: user.firstName,\r\n          avatar: user.avatar,\r\n          srcImage: user.avatar,\r\n          address: user.address,\r\n          dob: user.dob,\r\n          phone: user.phone,\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  onChange = (e) => {\r\n    var name = e.target.name;\r\n    var value = e.target.value;\r\n\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  findIndex = (item, list) => {\r\n    var result = -1;\r\n\r\n    list.forEach((user, index) => {\r\n      if (user.email === item) {\r\n        return (result = index);\r\n      }\r\n    });\r\n\r\n    return result;\r\n  };\r\n\r\n  onPostAvatar = (e) => {\r\n    var file = e.target.files[0];\r\n    var fr = new FileReader();\r\n    fr.readAsDataURL(file);\r\n    fr.onloadend = () => {\r\n      this.setState({\r\n        srcImage: fr.result,\r\n        avatar: fr.result,\r\n      });\r\n    };\r\n  };\r\n\r\n  handleInfo = () => {\r\n    var { users } = this.props;\r\n    var { firstName, lastName, address, dob, phone, avatar } = this.state;\r\n    var userMail = JSON.parse(localStorage.getItem(\"user\"));\r\n    var index = this.findIndex(userMail, users);\r\n\r\n    if (index === -1) return;\r\n\r\n    var user = {\r\n      id: users[index].id,\r\n      email: users[index].email,\r\n      password: users[index].password,\r\n      firstName: firstName,\r\n      lastName: lastName,\r\n      avatar: avatar ? avatar : \"\",\r\n      address: address,\r\n      dob: dob,\r\n      phone: phone,\r\n    };\r\n    this.props.onUpdateUser(user);\r\n  };\r\n\r\n  onSave = (e) => {\r\n    e.preventDefault();\r\n    var { users } = this.props;\r\n    var userMail = JSON.parse(localStorage.getItem(\"user\"));\r\n    var index = this.findIndex(userMail, users);\r\n    this.handleInfo();\r\n    this.setState({ check: users[index].id });\r\n  };\r\n\r\n  onChooseAvatar = () => {\r\n    this.fileRef.current.click();\r\n  };\r\n\r\n  render() {\r\n    var { firstName, check, lastName, address, dob, phone, srcImage } =\r\n      this.state;\r\n    if (check) {\r\n      return <Redirect to={`/admin`} />;\r\n    }\r\n    return (\r\n      <div className=\"container-fluid avatar-page\" id=\"login-form\">\r\n        <div className=\"login-form-content p-0\">\r\n          <div className=\"row align-items-center w-100\">\r\n            <div className=\"col-6 avatar-left \">\r\n              <div className=\"img mb-3 text-center\">\r\n                <img\r\n                  src={\r\n                    srcImage\r\n                      ? srcImage\r\n                      : \"https://www.kindpng.com/picc/m/78-785827_user-profile-avatar-login-account-male-user-icon.png\"\r\n                  }\r\n                  alt=\"\"\r\n                  className=\"avatar rounded-circle \"\r\n                />\r\n              </div>\r\n              <div className=\"choose-avatar text-center\">\r\n                <input\r\n                  type=\"file\"\r\n                  className=\"d-none\"\r\n                  ref={this.fileRef}\r\n                  name=\"file\"\r\n                  multiple\r\n                  onChange={this.onPostAvatar}\r\n                />\r\n                <button\r\n                  className=\"btn border shadow-none \"\r\n                  onClick={this.onChooseAvatar}\r\n                >\r\n                  Choose Avatar\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div className=\"col-6 text-center\">\r\n              <div className=\"display-5 fw-bold mb-4 font-ubun\">INFOMATION</div>\r\n              <form action=\"\" onSubmit={this.onSave}>\r\n                <div className=\"input-group mb-4\">\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"firstName\"\r\n                    aria-label=\"First name\"\r\n                    placeholder=\"First Name\"\r\n                    value={firstName}\r\n                    onChange={this.onChange}\r\n                    className=\"form-control shadow-none\"\r\n                  />\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"lastName\"\r\n                    value={lastName}\r\n                    onChange={this.onChange}\r\n                    aria-label=\"Last name\"\r\n                    placeholder=\"Last Name\"\r\n                    className=\"form-control shadow-none\"\r\n                  />\r\n                </div>\r\n                <div className=\"input-group mb-4\">\r\n                  <input\r\n                    type=\"text\"\r\n                    value={address}\r\n                    onChange={this.onChange}\r\n                    name=\"address\"\r\n                    className=\"form-control shadow-none\"\r\n                    placeholder=\"Address\"\r\n                  />\r\n                </div>\r\n                <div className=\"input-group mb-4\">\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"dob\"\r\n                    value={dob}\r\n                    onChange={this.onChange}\r\n                    className=\"form-control shadow-none\"\r\n                    placeholder=\"Date of Birth\"\r\n                  />\r\n                </div>\r\n                <div className=\"input-group mb-4\">\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"phone\"\r\n                    value={phone}\r\n                    onChange={this.onChange}\r\n                    className=\"form-control shadow-none\"\r\n                    placeholder=\"Telephone Number\"\r\n                  />\r\n                </div>\r\n                <button type=\"submit\" className=\"btn btn-success w-50\">\r\n                  Save\r\n                </button>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    users: state.usersAdmin,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, props) => {\r\n  return {\r\n    onGetUsers: () => {\r\n      dispatch(actions.acGetUserAdminRequest());\r\n    },\r\n    onUpdateUser: (user) => {\r\n      dispatch(actions.acUpdateUserAdminRequest(user));\r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Avatar);\r\n"]},"metadata":{},"sourceType":"module"}