{"ast":null,"code":"import _slicedToArray from\"C:/Users/emlac/Desktop/ReactNew/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import*as actions from\"./../../../../../../Actions\";import{Table,TableBody,TableHead,TableRow,TableCell,Fab,Box,Tooltip,Collapse,FormControl,InputLabel,Input,InputAdornment,Button,Stack,Pagination}from\"@material-ui/core\";import moment from\"moment\";import AddIcon from\"@material-ui/icons/Add\";import TableTaskItem from\"./TableTaskItem\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function TableTask(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),currentPage=_useState4[0],setCurrentPage=_useState4[1];var _useState5=useState(5),_useState6=_slicedToArray(_useState5,2),postsPerPage=_useState6[0],setPostsPerPage=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),keyAdd=_useState8[0],setKeyAdd=_useState8[1];var works=useSelector(function(state){return state.works;});var dispatch=useDispatch();var date=new moment();var dateTime=date.format(\"L LTS\");useEffect(function(){dispatch(actions.getWorkRequest());},[]);var addWork=function addWork(){var workObj={work:keyAdd,role:\"Doing\",date:dateTime};if(!workObj.work){return;}dispatch(actions.addWorkRequest(workObj));setKeyAdd(\"\");};var deleteWork=function deleteWork(id){dispatch(actions.deleteWorkRequest(id));};var onCheck=function onCheck(e,work){var check=e.target.checked;var workNew={};if(check){workNew={checked:check,id:work.id,work:work.work,role:\"Done\",date:work.date};dispatch(actions.updateWorkRequest(workNew));}else{workNew={checked:check,id:work.id,work:work.work,role:\"Doing\",date:work.date};dispatch(actions.updateWorkRequest(workNew));}};var pageNumber=0;for(var i=1;i<=Math.ceil(works.length/postsPerPage);i++){pageNumber++;}var indexOfLastPost=currentPage*postsPerPage;var indexOfFirstPost=indexOfLastPost-postsPerPage;var currentPosts=works.slice(indexOfFirstPost,indexOfLastPost);return/*#__PURE__*/_jsxs(Box,{sx:{position:\"relative\"},children:[/*#__PURE__*/_jsx(Box,{sx:{minHeight:\"422px\"},children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:3,children:/*#__PURE__*/_jsx(Collapse,{timeout:\"auto\",unmountOnExit:true,in:open,children:/*#__PURE__*/_jsxs(FormControl,{variant:\"standard\",className:\"w-100\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Add Work\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",value:keyAdd,className:\"w-100\",onChange:function onChange(e){return setKeyAdd(e.target.value);},endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return addWork();},children:/*#__PURE__*/_jsx(AddIcon,{})})})})]})})})})}),/*#__PURE__*/_jsx(TableBody,{children:currentPosts.map(function(work,index){return/*#__PURE__*/_jsx(TableTaskItem,{onCheck:onCheck,work:work,deleteWork:deleteWork},index);})})]})}),/*#__PURE__*/_jsx(Box,{sx:{padding:\"10px 0\",display:\"flex\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(Stack,{spacing:2,children:/*#__PURE__*/_jsx(Pagination,{count:pageNumber,onClick:function onClick(e){return setCurrentPage(e.target.innerText);},color:\"secondary\",hidePrevButton:true,hideNextButton:true})})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Add\",placement:\"top\",children:/*#__PURE__*/_jsx(Fab,{color:\"secondary\",onClick:function onClick(){return setOpen(!open);},sx:{position:\"absolute\",top:\"-65px\",right:\"10px\"},className:\"button-add\",\"aria-label\":\"add\",children:/*#__PURE__*/_jsx(AddIcon,{})})})]});}","map":{"version":3,"sources":["C:/Users/emlac/Desktop/ReactNew/src/Components/AdminPage/Admin/Home/Tasks/TableTask/index.js"],"names":["React","useState","useEffect","useSelector","useDispatch","actions","Table","TableBody","TableHead","TableRow","TableCell","Fab","Box","Tooltip","Collapse","FormControl","InputLabel","Input","InputAdornment","Button","Stack","Pagination","moment","AddIcon","TableTaskItem","TableTask","open","setOpen","currentPage","setCurrentPage","postsPerPage","setPostsPerPage","keyAdd","setKeyAdd","works","state","dispatch","date","dateTime","format","getWorkRequest","addWork","workObj","work","role","addWorkRequest","deleteWork","id","deleteWorkRequest","onCheck","e","check","target","checked","workNew","updateWorkRequest","pageNumber","i","Math","ceil","length","indexOfLastPost","indexOfFirstPost","currentPosts","slice","position","minHeight","value","map","index","padding","display","justifyContent","innerText","top","right"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport * as actions from \"./../../../../../../Actions\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  Fab,\r\n  Box,\r\n  Tooltip,\r\n  Collapse,\r\n  FormControl,\r\n  InputLabel,\r\n  Input,\r\n  InputAdornment,\r\n  Button,\r\n  Stack,\r\n  Pagination,\r\n} from \"@material-ui/core\";\r\nimport moment from \"moment\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport TableTaskItem from \"./TableTaskItem\";\r\n\r\nexport default function TableTask() {\r\n  const [open, setOpen] = useState(false);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [postsPerPage, setPostsPerPage] = useState(5);\r\n  const [keyAdd, setKeyAdd] = useState(\"\");\r\n  const works = useSelector((state) => state.works);\r\n  const dispatch = useDispatch();\r\n\r\n  const date = new moment();\r\n  const dateTime = date.format(\"L LTS\");\r\n\r\n  useEffect(() => {\r\n    dispatch(actions.getWorkRequest());\r\n  }, []);\r\n\r\n  const addWork = () => {\r\n    var workObj = {\r\n      work: keyAdd,\r\n      role: \"Doing\",\r\n      date: dateTime,\r\n    };\r\n    if (!workObj.work) {\r\n      return;\r\n    }\r\n    dispatch(actions.addWorkRequest(workObj));\r\n    setKeyAdd(\"\");\r\n  };\r\n\r\n  const deleteWork = (id) => {\r\n    dispatch(actions.deleteWorkRequest(id));\r\n  };\r\n\r\n  const onCheck = (e, work) => {\r\n    var check = e.target.checked;\r\n    var workNew = {};\r\n    if (check) {\r\n      workNew = {\r\n        checked: check,\r\n        id: work.id,\r\n        work: work.work,\r\n        role: \"Done\",\r\n        date: work.date,\r\n      };\r\n      dispatch(actions.updateWorkRequest(workNew));\r\n    } else {\r\n      workNew = {\r\n        checked: check,\r\n        id: work.id,\r\n        work: work.work,\r\n        role: \"Doing\",\r\n        date: work.date,\r\n      };\r\n      dispatch(actions.updateWorkRequest(workNew));\r\n    }\r\n  };\r\n\r\n  var pageNumber = 0;\r\n  for (let i = 1; i <= Math.ceil(works.length / postsPerPage); i++) {\r\n    pageNumber++;\r\n  }\r\n\r\n  const indexOfLastPost = currentPage * postsPerPage;\r\n  const indexOfFirstPost = indexOfLastPost - postsPerPage;\r\n  const currentPosts = works.slice(indexOfFirstPost, indexOfLastPost);\r\n\r\n  return (\r\n    <Box sx={{ position: \"relative\" }}>\r\n      <Box sx={{ minHeight: \"422px\" }}>\r\n        <Table>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell colSpan={3}>\r\n                <Collapse timeout=\"auto\" unmountOnExit in={open}>\r\n                  <FormControl variant=\"standard\" className=\"w-100\">\r\n                    <InputLabel>Add Work</InputLabel>\r\n                    <Input\r\n                      type=\"text\"\r\n                      value={keyAdd}\r\n                      className=\"w-100\"\r\n                      onChange={(e) => setKeyAdd(e.target.value)}\r\n                      endAdornment={\r\n                        <InputAdornment position=\"end\">\r\n                          <Button onClick={() => addWork()}>\r\n                            <AddIcon />\r\n                          </Button>\r\n                        </InputAdornment>\r\n                      }\r\n                    />\r\n                  </FormControl>\r\n                </Collapse>\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {currentPosts.map((work, index) => {\r\n              return (\r\n                <TableTaskItem\r\n                  key={index}\r\n                  onCheck={onCheck}\r\n                  work={work}\r\n                  deleteWork={deleteWork}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </Box>\r\n      <Box\r\n        sx={{ padding: \"10px 0\", display: \"flex\", justifyContent: \"center\" }}\r\n      >\r\n        <Stack spacing={2}>\r\n          <Pagination\r\n            count={pageNumber}\r\n            onClick={(e) => setCurrentPage(e.target.innerText)}\r\n            color=\"secondary\"\r\n            hidePrevButton\r\n            hideNextButton\r\n          />\r\n        </Stack>\r\n      </Box>\r\n      <Tooltip title=\"Add\" placement=\"top\">\r\n        <Fab\r\n          color=\"secondary\"\r\n          onClick={() => setOpen(!open)}\r\n          sx={{ position: \"absolute\", top: \"-65px\", right: \"10px\" }}\r\n          className=\"button-add\"\r\n          aria-label=\"add\"\r\n        >\r\n          <AddIcon />\r\n        </Fab>\r\n      </Tooltip>\r\n    </Box>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}